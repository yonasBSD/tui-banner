use std::collections::HashMap;

use super::{Font, Glyph};

pub fn block_font() -> Font {
    let mut glyphs = HashMap::new();
    for &(ch, rows) in BLOCK_GLYPHS {
        glyphs.insert(ch, Glyph::from_rows(rows));
    }

    let height = BLOCK_HEIGHT;
    let fallback = Glyph::from_rows(QUESTION_MARK);

    Font {
        height,
        glyphs,
        fallback,
    }
}

impl Glyph {
    fn from_rows(rows: [&str; BLOCK_HEIGHT]) -> Glyph {
        let rows = rows
            .iter()
            .map(|row| row.chars().collect::<Vec<_>>())
            .collect::<Vec<_>>();
        Glyph { rows }
    }
}

const BLOCK_HEIGHT: usize = 5;

const QUESTION_MARK: [&str; BLOCK_HEIGHT] = [
    " ### ",
    "#   #",
    "  ## ",
    "     ",
    "  #  ",
];

const BLOCK_GLYPHS: &[(char, [&str; BLOCK_HEIGHT])] = &[
    (' ', ["     ", "     ", "     ", "     ", "     "]),
    ('A', [" ### ", "#   #", "#####", "#   #", "#   #"]),
    ('B', ["#### ", "#   #", "#### ", "#   #", "#### "]),
    ('C', [" ####", "#    ", "#    ", "#    ", " ####"]),
    ('D', ["#### ", "#   #", "#   #", "#   #", "#### "]),
    ('E', ["#####", "#    ", "#### ", "#    ", "#####"]),
    ('F', ["#####", "#    ", "#### ", "#    ", "#    "]),
    ('G', [" ####", "#    ", "# ###", "#   #", " ####"]),
    ('H', ["#   #", "#   #", "#####", "#   #", "#   #"]),
    ('I', ["#####", "  #  ", "  #  ", "  #  ", "#####"]),
    ('J', ["#####", "   # ", "   # ", "#  # ", " ##  "]),
    ('K', ["#   #", "#  # ", "###  ", "#  # ", "#   #"]),
    ('L', ["#    ", "#    ", "#    ", "#    ", "#####"]),
    ('M', ["#   #", "## ##", "# # #", "#   #", "#   #"]),
    ('N', ["#   #", "##  #", "# # #", "#  ##", "#   #"]),
    ('O', [" ### ", "#   #", "#   #", "#   #", " ### "]),
    ('P', ["#### ", "#   #", "#### ", "#    ", "#    "]),
    ('Q', [" ### ", "#   #", "#   #", "#  ##", " ####"]),
    ('R', ["#### ", "#   #", "#### ", "#  # ", "#   #"]),
    ('S', [" ####", "#    ", " ### ", "    #", "#### "]),
    ('T', ["#####", "  #  ", "  #  ", "  #  ", "  #  "]),
    ('U', ["#   #", "#   #", "#   #", "#   #", " ### "]),
    ('V', ["#   #", "#   #", "#   #", " # # ", "  #  "]),
    ('W', ["#   #", "#   #", "# # #", "## ##", "#   #"]),
    ('X', ["#   #", " # # ", "  #  ", " # # ", "#   #"]),
    ('Y', ["#   #", " # # ", "  #  ", "  #  ", "  #  "]),
    ('Z', ["#####", "   # ", "  #  ", " #   ", "#####"]),
    ('0', [" ### ", "#   #", "#   #", "#   #", " ### "]),
    ('1', ["  #  ", " ##  ", "  #  ", "  #  ", " ### "]),
    ('2', [" ### ", "#   #", "   # ", "  #  ", "#####"]),
    ('3', [" ### ", "    #", "  ## ", "    #", " ### "]),
    ('4', ["#   #", "#   #", "#####", "    #", "    #"]),
    ('5', ["#####", "#    ", "#### ", "    #", "#### "]),
    ('6', [" ### ", "#    ", "#### ", "#   #", " ### "]),
    ('7', ["#####", "   # ", "  #  ", " #   ", "#    "]),
    ('8', [" ### ", "#   #", " ### ", "#   #", " ### "]),
    ('9', [" ### ", "#   #", " ####", "    #", " ### "]),
];
